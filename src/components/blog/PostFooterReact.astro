---
import { type CollectionEntry } from "astro:content";
import PostFooter from '@/components/react/PostFooter';
import { processAuthorsList } from '@/data/authors';

interface Props {
	content: CollectionEntry<"post">;
}

const { content } = Astro.props;

// Extract data from frontmatter
const defaultAuthor = { name: "Anonymous" };
const rawAuthors = content.data.authors || 
  (content.data.author ? [content.data.author] : [defaultAuthor]);

// Process authors with centralized data and URL priority
const authors = processAuthorsList(rawAuthors);

const topics = content.data.tags || [];

// Create props object with proper types
const postFooterProps = {
  authors,
  topics,
  ...(content.data.acknowledgement && { acknowledgement: content.data.acknowledgement }),
  ...(content.data.bibtex && { bibtex: content.data.bibtex }),
  year: content.data.year || new Date(content.data.publishDate).getFullYear()
};
---

<PostFooter 
  client:load 
  {...postFooterProps}
/>
